<div class="card p-4">
  <p-card header="Formularios Pendientes de Revisi贸n">
    <p-table [value]="formularios" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Nombre de la Empresa</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-formulario>
        <tr>
          <td>{{ formulario.id }}</td>
          <td>{{ formulario.empresa.nombre }}</td>
          <td>
            <span class="p-tag p-tag-warning">Pendiente</span>
          </td>
          <td>
            <p-button label="Revisar" icon="pi pi-search" severity="info" (click)="revisarFormulario(formulario)"></p-button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="empty">
        <tr>
          <td colspan="4">No hay formularios pendientes de revisi贸n.</td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</div>

<p-dialog header="Revisar Formulario de Empresa" [(visible)]="displayDialogRevisar" [modal]="true" [style]="{width: '60vw'}">
    
    <ng-container *ngIf="formularioSeleccionado">
        <div class="p-grid p-fluid">
            <div class="p-col-12 p-md-6">
                <div class="p-field">
                    <label>Nombre de la Empresa</label>
                    <input type="text" pInputText [ngModel]="formularioSeleccionado.empresa.nombre" [disabled]="true">
                </div>
            </div>
            <div class="p-col-12 p-md-6">
                <div class="p-field">
                    <label>NIT</label>
                    <input type="text" pInputText [ngModel]="formularioSeleccionado.empresa.nit" [disabled]="true">
                </div>
            </div>
             <div class="p-col-12">
                <div class="p-field-checkbox flex align-items-center">
                    <p-checkbox [(ngModel)]="aprobacionDatosEmpresa" [binary]="true"></p-checkbox>
                    <label class="ml-2">Aprobaci贸n de Datos de la Empresa</label>
                </div>
            </div>
        </div>

        <div class="p-grid p-fluid mt-4">
            <div class="p-col-12 p-md-6">
                <div class="p-field">
                    <label>Nombre del Referente</label>
                    <input type="text" pInputText [ngModel]="formularioSeleccionado.referencia.nombre" [disabled]="true">
                </div>
            </div>
            <div class="p-col-12 p-md-6">
                <div class="p-field">
                    <label>Email del Referente</label>
                    <input type="text" pInputText [ngModel]="formularioSeleccionado.referencia.email" [disabled]="true">
                </div>
            </div>
            <div class="p-col-12">
                 <div class="p-field-checkbox flex align-items-center">
                    <p-checkbox [(ngModel)]="aprobacionReferencias" [binary]="true"></p-checkbox>
                    <label class="ml-2">Aprobaci贸n de Referencias</label>
                </div>
            </div>
        </div>
    </ng-container>

    <div class="flex align-items-center mt-4">
        <p-checkbox [(ngModel)]="aprobacionGeneral" [binary]="true"></p-checkbox>
        <label class="ml-2">Aprobar todo</label>
    </div>

    <ng-template pTemplate="footer">
        <p-button label="Rechazar" icon="pi pi-times" severity="danger" (click)="rechazarFormulario()"></p-button>
        <p-button label="Aprobar" icon="pi pi-check" severity="success" (click)="aprobarFormulario()" [disabled]="!aprobacionGeneral"></p-button>
    </ng-template>
</p-dialog>
